<?xml version="1.0" encoding="iso-8859-1"?>
<!DOCTYPE html 
     PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
     "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en">
<head>
  <title>Class: ForeignKeys</title>
  <meta http-equiv="Content-Type" content="text/html; charset=iso-8859-1" />
  <meta http-equiv="Content-Script-Type" content="text/javascript" />
  <link rel="stylesheet" href=".././rdoc-style.css" type="text/css" media="screen" />
  <script type="text/javascript">
  // <![CDATA[

  function popupCode( url ) {
    window.open(url, "Code", "resizable=yes,scrollbars=yes,toolbar=no,status=no,height=150,width=400")
  }

  function toggleCode( id ) {
    if ( document.getElementById )
      elem = document.getElementById( id );
    else if ( document.all )
      elem = eval( "document.all." + id );
    else
      return false;

    elemStyle = elem.style;
    
    if ( elemStyle.display != "block" ) {
      elemStyle.display = "block"
    } else {
      elemStyle.display = "none"
    }

    return true;
  }
  
  // Make codeblocks hidden by default
  document.writeln( "<style type=\"text/css\">div.method-source-code { display: none }</style>" )
  
  // ]]>
  </script>

</head>
<body>



    <div id="classHeader">
        <table class="header-table">
        <tr class="top-aligned-row">
          <td><strong>Class</strong></td>
          <td class="class-name-in-header">ForeignKeys</td>
        </tr>
        <tr class="top-aligned-row">
            <td><strong>In:</strong></td>
            <td>
                <a href="../files/lib/migration_helpers/migration_helpers_rb.html">
                lib/migration_helpers/migration_helpers.rb
                </a>
        <br />
            </td>
        </tr>

        <tr class="top-aligned-row">
            <td><strong>Parent:</strong></td>
            <td>
                Object
            </td>
        </tr>
        </table>
    </div>
  <!-- banner header -->

  <div id="bodyContent">



  <div id="contextContent">

    <div id="description">
      <h1><a href="ForeignKeys.html">ForeignKeys</a></h1>
<p>
Adds the foreign_key and remove_foreign_key methods to your migrations.
</p>
<h2>Usage</h2>
<pre>
  rails = TavForRails::Project.new(options)
  rails.add &quot;ForeignKeys&quot;, options
</pre>
<p>
Installs migration_helpers.rb into the lib directory.
</p>
<p>
It currently supports the postgresql, mysql and jdbcmysql adapters but it
will probably work with most databases and adapters. You just have to
modify migration_helpers.rb in the <a
href="TavForRails.html">TavForRails</a> lib/migration_helpers/file/
directory to use the right foreign key creation statement for your database
and hook it up to the name of your adapter. It will be straightforward
after you look at the code.
</p>
<p>
To use the helper methods build the migration like this:
</p>
<pre>
  require &quot;migration_helpers&quot;

  class MyMigration &lt; ActiveRecord::Migration
    extend MigrationHelpers
    def self.up
      create :books do |t|
         t.column author_id, :integer
         ...
      end
      foreign_key :books, :author_id, :authors
    end

    def self.down
      remove_foreign_key :books, :author_id
      drop_table :books
    end
  end
</pre>
<p>
There is further information about the methods arguments in the source code
of the module.
</p>

    </div>


   </div>

    <div id="method-list">
      <h3 class="section-bar">Methods</h3>

      <div class="name-list">
      <a href="#M000011">add</a>&nbsp;&nbsp;
      </div>
    </div>

  </div>


    <!-- if includes -->

    <div id="section">





      


    <!-- if method_list -->
    <div id="methods">
      <h3 class="section-bar">Public Instance methods</h3>

      <div id="method-M000011" class="method-detail">
        <a name="M000011"></a>

        <div class="method-heading">
          <a href="#M000011" class="method-signature">
          <span class="method-name">add</span><span class="method-args">(options = {})</span>
          </a>
        </div>
      
        <div class="method-description">
          <p><a class="source-toggle" href="#"
            onclick="toggleCode('M000011-source');return false;">[Source]</a></p>
          <div class="method-source-code" id="M000011-source">
<pre>
<span class="ruby-comment cmt"># File lib/migration_helpers/migration_helpers.rb, line 41</span>
  <span class="ruby-keyword kw">def</span> <span class="ruby-identifier">add</span>(<span class="ruby-identifier">options</span> = {})
    <span class="ruby-constant">Utils</span>.<span class="ruby-identifier">copy_to_lib</span>(<span class="ruby-value str">&quot;migration_helpers&quot;</span>, <span class="ruby-value str">&quot;migration_helpers.rb&quot;</span>)
  <span class="ruby-keyword kw">end</span>
</pre>
          </div>
        </div>
      </div>


    </div>


  </div>


<div id="validator-badges">
  <p><small><a href="http://validator.w3.org/check/referer">[Validate]</a></small></p>
</div>

</body>
</html>